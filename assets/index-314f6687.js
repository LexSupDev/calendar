(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();const w=document.querySelector(".filters__wrapper"),P=document.querySelector("#filterStartTime"),x=document.querySelector("#filterDuration"),O=document.querySelector("#filterLocation"),k=document.querySelector("#filterParticipants");w.addEventListener("change",()=>{p(_)});function A(e){let t={Events:[]};return t.Events=e.Events.filter(i=>i.startTime===P.value&&i.duration===x.value&&i.location===O.value&&i.participants.join(",")===k.value),t}const T=document.querySelector(".events__date"),C=document.querySelector(".events__addButton"),j=document.querySelector(".events__addPopup");let a={};localStorage.getItem("eventsList")?a=JSON.parse(localStorage.getItem("eventsList")):a={Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-02-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-02-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]};let I=new Date,f;function p(e=f){f=e;let t={Events:[]};A(a).Events.map(l=>{let o=new Date(l.date);e.getDate()===o.getDate()&&e.getMonth()===o.getMonth()&&e.getFullYear()===o.getFullYear()&&t.Events.push(l)});const u=document.querySelector(".events__list");u.innerHTML="",t.Events.forEach(l=>{let o=`<article class="events_listItem eventItem"><div class="eventItem__controlBlock"><span class="eventItem__controlItem button button--save collapse"></span><span class="eventItem__controlItem button button--edit"></span>
        <span class="eventItem__controlItem button button--del"></span>
        </div>
      <p class="eventItem__title">${l.title}</p>                                                             
      <div class="eventItem__row">                                                                                                
      <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${l.startTime}</span></span>                      
      <span class="eventItem__duration"> Длительность: <span class="eventItem__durationSpan">${l.duration}</span></span>              
      </div>                                                                                                                      
      <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${l.location}</span></p>                               
      <p class="eventItem__participants">Участники: 
      <span class="eventItem__participantsSpan">${l.participants.join(",")}</span></p></article>`;u.innerHTML+=o});const n=document.querySelectorAll(".button--edit"),r=document.querySelectorAll(".button--del"),s=document.querySelectorAll(".button--save");r.forEach((l,o)=>{l.addEventListener("click",S=>{S.target.parentElement.parentElement.remove(),a.Events.forEach((d,v)=>{JSON.stringify(d)===JSON.stringify(t.Events[o])&&(a.Events.splice(v,1),p(f))})})}),n.forEach((l,o)=>{l.addEventListener("click",S=>{S.preventDefault(),l.classList.add("collapse"),s[o].classList.remove("collapse");let d=S.target.parentElement.parentElement,v=d.querySelector(".eventItem__title"),y=d.querySelector(".eventItem__startTimeSpan"),h=d.querySelector(".eventItem__durationSpan"),L=d.querySelector(".eventItem__locationSpan"),g=d.querySelector(".eventItem__participantsSpan");v.innerHTML=`<input type="text" value="${v.textContent}">`,y.innerHTML=`<input type="time" value="${y.textContent}">`,h.innerHTML=`<input type="text" value="${h.textContent}">`,L.innerHTML=`<input type="text" value="${L.textContent}">`,g.innerHTML=`<input type="text" value="${g.textContent}">`,s[o].addEventListener("click",H=>{H.preventDefault(),a.Events.forEach((N,E)=>{JSON.stringify(N)===JSON.stringify(t.Events[o])&&(a.Events[E].title=v.children[0].value,a.Events[E].startTime=y.children[0].value,a.Events[E].duration=h.children[0].value,a.Events[E].location=L.children[0].value,a.Events[E].participants=g.children[0].value.split(","),p(f))})})})}),localStorage.setItem("eventsList",JSON.stringify(a))}p(I);T.innerHTML=I.toLocaleString("ru-ru",{month:"long",day:"numeric"});C.addEventListener("click",()=>{j.classList.toggle("collapse")});const B=document.querySelector(".addEventPopup__form");B.addEventListener("submit",e=>{const t=document.querySelector("#event-title"),i=document.querySelector("#event-date"),u=document.querySelector("#event-startTime"),n=document.querySelector("#event-duration"),r=document.querySelector("#event-location"),s=document.querySelector("#event-participants");e.preventDefault(),a.Events.push({title:t.value,date:i.value,startTime:u.value,duration:n.value,location:r.value,participants:s.value.split(",")}),p(f)});let q=new Set,D=new Set,b=new Set,$=new Set;a.Events.map(e=>{q.add(e.startTime),D.add(e.duration),b.add(e.location),$.add(e.participants)});const J=document.querySelector("#filterStartTime"),F=document.querySelector("#filterDuration"),Y=document.querySelector("#filterLocation"),K=document.querySelector("#filterParticipants");q.forEach(e=>{let t=`<option value="${e}" class="startTime__listItem">${e}</option>`;J.innerHTML+=t});D.forEach(e=>{let t=`<option value="${e}" className="duration__listItem">${e}</option>`;F.innerHTML+=t});b.forEach(e=>{let t=`<option value="${e}" className="location__listItem">${e}</option>`;Y.innerHTML+=t});$.forEach(e=>{let t=`<option value="${e.join(",")}" className="participants__listItem">${e.join(",")}</option>`;K.innerHTML+=t});const W=document.querySelector("#calendar");let _=new Date,M=1,c=new Date(2023,M),m="<table class='calendar__table table table-bordered'><thead class='table-dark'><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let e=1;e<c.getDay();e++)m+="<td></td>";for(;c.getMonth()==M;)m+="<td>"+c.getDate()+"</td>",c.getDay()%7==0&&(m+="</tr><tr>"),c.setDate(c.getDate()+1);if(c.getDay()!=0)for(let e=c.getDay();e<=7;e++)m+="<td></td>";m+="</tr></table>";W.innerHTML=m;const z=document.querySelector(".calendar__table");z.addEventListener("click",e=>{Number(e.target.textContent)&&(_.setDate(e.target.textContent),T.innerHTML=_.toLocaleString("ru-ru",{month:"long",day:"numeric"})),p(_)});
