(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function u(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=u(e);fetch(e.href,t)}})();let s={};function q(){H(),E(new Date),M(s)}function M(o){function c(){let u=new Set,a=new Set,e=new Set,t=new Set;o.Events.forEach(n=>{u.add(n.startTime),a.add(n.duration),e.add(n.location),t.add(n.participants.join(","))});const r=document.querySelector("#filterStartTime"),l=document.querySelector("#filterDuration"),d=document.querySelector("#filterLocation"),h=document.querySelector("#filterParticipants");u.forEach(n=>{let i=`<option value="${n}" class="startTime__listItem">${n}</option>`;r.innerHTML+=i}),Array.from(a).sort((n,i)=>n-i).forEach(n=>{let i=`<option value="${n}" className="duration__listItem">${n}</option>`;l.innerHTML+=i}),e.forEach(n=>{let i=`<option value="${n}" className="location__listItem">${n}</option>`;d.innerHTML+=i}),t.forEach(n=>{let i=`<option value="${n}" className="participants__listItem">${n}</option>`;h.innerHTML+=i})}c()}function $(o){const c=document.querySelector("#filterStartTime"),u=document.querySelector("#filterDuration"),a=document.querySelector("#filterLocation"),e=document.querySelector("#filterParticipants");let t={Events:[]};return t.Events=o.Events.slice(0),t.Events=t.Events.filter(r=>c.value?r.startTime===c.value:!0),t.Events=t.Events.filter(r=>u.value?r.duration===u.value:!0),t.Events=t.Events.filter(r=>a.value?r.location===a.value:!0),t.Events=t.Events.filter(r=>e.value?r.participants.join(",")===e.value:!0),t.Events}function E(o){function c(){const r=document.querySelector(".events__date");r.innerHTML=o.toLocaleString("ru-ru",{month:"long",day:"numeric",year:"numeric"})}function u(){localStorage.getItem("eventsList")?s=JSON.parse(localStorage.getItem("eventsList")):s={Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-02-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-02-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]}}function a(){localStorage.setItem("eventsList",JSON.stringify(s))}function e(){let r=$(s),l={Events:[]};r.forEach(n=>{let i=new Date(n.date);o.getDate()===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&l.Events.push(n)});const d=document.querySelector(".events__list");d.innerHTML="",l.Events.forEach(n=>{let i=`<article class="events_listItem eventItem"><div class="eventItem__controlBlock"><span class="eventItem__controlItem btn btn--save collapse"></span><span class="eventItem__controlItem btn btn--edit"></span>
        <span class="eventItem__controlItem btn btn--del"></span>
        </div>
      <p class="eventItem__title">${n.title}</p>                                                             
      <div class="eventItem__row">                                                                                                
      <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${n.startTime}</span></span>                      
      <span class="eventItem__duration">\\ Длительность: <span class="eventItem__durationSpan">${n.duration}</span></span>              
      </div>                                                                                                                      
      <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${n.location}</span></p>                               
      <p class="eventItem__participants">Участники: 
      <span class="eventItem__participantsSpan">${n.participants.join(",")}</span></p></article>`;d.innerHTML+=i});function h(){const n=document.querySelectorAll(".btn--edit"),i=document.querySelectorAll(".btn--del"),I=document.querySelectorAll(".btn--save");i.forEach((S,v)=>{S.addEventListener("click",_=>{_.target.parentElement.parentElement.remove(),s.Events.forEach((p,m)=>{JSON.stringify(p)===JSON.stringify(l.Events[v])&&(s.Events.splice(m,1),E(o))})})}),n.forEach((S,v)=>{S.addEventListener("click",_=>{_.preventDefault(),S.classList.add("collapse"),I[v].classList.remove("collapse");let p=_.target.parentElement.parentElement,m=p.querySelector(".eventItem__title"),y=p.querySelector(".eventItem__startTimeSpan"),g=p.querySelector(".eventItem__durationSpan"),L=p.querySelector(".eventItem__locationSpan"),T=p.querySelector(".eventItem__participantsSpan");m.innerHTML=`<input type="text" value="${m.textContent}">`,y.innerHTML=`<input type="time" value="${y.textContent}">`,g.innerHTML=`<input type="text" value="${g.textContent}">`,L.innerHTML=`<input type="text" value="${L.textContent}">`,T.innerHTML=`<input type="text" value="${T.textContent}">`,I[v].addEventListener("click",D=>{D.preventDefault(),s.Events.forEach((b,f)=>{JSON.stringify(b)===JSON.stringify(l.Events[v])&&(s.Events[f].title=m.children[0].value,s.Events[f].startTime=y.children[0].value,s.Events[f].duration=g.children[0].value,s.Events[f].location=L.children[0].value,s.Events[f].participants=T.children[0].value.split(","),E(o))})})})})}h()}function t(){function r(){document.querySelector(".filters__wrapper").addEventListener("change",()=>{E(o)})}r()}t(),u(),c(),e(),a()}function H(){function o(){const a=document.querySelector("#calendar");let e=new Date;const t=e.getDate(),r=e.getMonth();let l="<table class='calendar__table table table-bordered JS-calendar'><thead><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let d=1;d<e.getDay();d++)l+="<td></td>";for(;e.getMonth()===r;)e.getDate()===t?l+="<td class='table-active'>"+e.getDate()+"</td>":l+="<td>"+e.getDate()+"</td>",e.getDay()%7===0&&(l+="</tr><tr>"),e.setDate(e.getDate()+1);if(e.getDay()!==0)for(let d=e.getDay();d<=7;d++)l+="<td></td>";l+="</tr></table>",a.innerHTML=l}function c(a){const e=a.currentTarget.querySelectorAll("td"),t=a.target.textContent,r=new Date(new Date().setDate(t));e.forEach(l=>l.classList.remove("table-active")),t&&a.target.tagName==="TD"&&a.target.classList.add("table-active"),E(r)}o(),document.querySelector(".JS-calendar").addEventListener("click",c)}q();
