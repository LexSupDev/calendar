(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();const $=document.querySelector(".filters__wrapper"),H=document.querySelector("#filterStartTime"),N=document.querySelector("#filterDuration"),P=document.querySelector("#filterLocation"),w=document.querySelector("#filterParticipants");$.addEventListener("change",()=>{v(y)});function x(e){let a={Events:[]};return a.Events=e.Events.filter(s=>s.startTime===H.value&&s.duration===N.value&&s.location===P.value&&s.participants===w.value),a}const I=document.querySelector(".events__date"),O=document.querySelector(".events__addButton"),k=document.querySelector(".events__addPopup");let r={};localStorage.getItem("eventsList")?r=JSON.parse(localStorage.getItem("eventsList")):r={Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-02-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-02-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]};let q=new Date,f;function v(e=f){f=e;let a={Events:[]};x(r).Events.map(l=>{let o=new Date(l.date);e.getDate()===o.getDate()&&e.getMonth()===o.getMonth()&&e.getFullYear()===o.getFullYear()&&a.Events.push(l)});const u=document.querySelector(".events__list");u.innerHTML="",a.Events.forEach(l=>{let o=`<article class="events_listItem eventItem"><div class="eventItem__controlBlock"><span class="eventItem__controlItem button button--save collapse"></span><span class="eventItem__controlItem button button--edit"></span>
        <span class="eventItem__controlItem button button--del"></span>
        </div>
      <p class="eventItem__title">${l.title}</p>                                                             
      <div class="eventItem__row">                                                                                                
      <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${l.startTime}</span></span>                      
      <span class="eventItem__duration"> Длительность: <span class="eventItem__durationSpan">${l.duration}</span></span>              
      </div>                                                                                                                      
      <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${l.location}</span></p>                               
      <p class="eventItem__participants">Участники: 
      <span class="eventItem__participantsSpan">${l.participants.join(",")}</span></p></article>`;u.innerHTML+=o});const t=document.querySelectorAll(".button--edit"),n=document.querySelectorAll(".button--del"),i=document.querySelectorAll(".button--save");n.forEach((l,o)=>{l.addEventListener("click",_=>{_.target.parentElement.parentElement.remove(),r.Events.forEach((d,m)=>{JSON.stringify(d)===JSON.stringify(a.Events[o])&&(r.Events.splice(m,1),v(f))})})}),t.forEach((l,o)=>{l.addEventListener("click",_=>{_.preventDefault(),l.classList.add("collapse"),i[o].classList.remove("collapse");let d=_.target.parentElement.parentElement,m=d.querySelector(".eventItem__title"),S=d.querySelector(".eventItem__startTimeSpan"),g=d.querySelector(".eventItem__durationSpan"),h=d.querySelector(".eventItem__locationSpan"),L=d.querySelector(".eventItem__participantsSpan");m.innerHTML=`<input type="text" value="${m.textContent}">`,S.innerHTML=`<input type="time" value="${S.textContent}">`,g.innerHTML=`<input type="text" value="${g.textContent}">`,h.innerHTML=`<input type="text" value="${h.textContent}">`,L.innerHTML=`<input type="text" value="${L.textContent}">`,i[o].addEventListener("click",D=>{D.preventDefault(),r.Events.forEach((M,E)=>{JSON.stringify(M)===JSON.stringify(a.Events[o])&&(r.Events[E].title=m.children[0].value,r.Events[E].startTime=S.children[0].value,r.Events[E].duration=g.children[0].value,r.Events[E].location=h.children[0].value,r.Events[E].participants=L.children[0].value.split(","),v(f))})})})}),localStorage.setItem("eventsList",JSON.stringify(r))}v(q);I.innerHTML=q.toLocaleString("ru-ru",{month:"long",day:"numeric"});O.addEventListener("click",()=>{k.classList.toggle("collapse")});const A=document.querySelector(".addEventPopup__form");A.addEventListener("submit",e=>{const a=document.querySelector("#event-title"),s=document.querySelector("#event-date"),u=document.querySelector("#event-startTime"),t=document.querySelector("#event-duration"),n=document.querySelector("#event-location"),i=document.querySelector("#event-participants");e.preventDefault(),r.Events.push({title:a.value,date:s.value,startTime:u.value,duration:t.value,location:n.value,participants:i.value.split(",")}),v(f)});let T=new Set;r.Events.map(e=>{T.push(e.startTime),console.log(T)});const C=document.querySelector("#calendar");let y=new Date,b=1,c=new Date(2023,b),p="<table class='calendar__table table table-bordered'><thead class='table-dark'><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let e=1;e<c.getDay();e++)p+="<td></td>";for(;c.getMonth()==b;)p+="<td>"+c.getDate()+"</td>",c.getDay()%7==0&&(p+="</tr><tr>"),c.setDate(c.getDate()+1);if(c.getDay()!=0)for(let e=c.getDay();e<=7;e++)p+="<td></td>";p+="</tr></table>";C.innerHTML=p;const B=document.querySelector(".calendar__table");B.addEventListener("click",e=>{Number(e.target.textContent)&&(y.setDate(e.target.textContent),I.innerHTML=y.toLocaleString("ru-ru",{month:"long",day:"numeric"})),v(y)});
