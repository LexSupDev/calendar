(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const m=document.querySelector(".events__date"),g=document.querySelector(".events__addButton"),E=document.querySelector(".events__addPopup");let o={};localStorage.getItem("eventsList")?o=JSON.parse(localStorage.getItem("eventsList")):o={Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-02-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-02-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]};let p=new Date,u;function d(n){u=n;let a={Events:[]};o.Events.map(e=>{let t=new Date(e.date);n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()&&a.Events.push(e)});const s=document.querySelector(".events__list");s.innerHTML="",a.Events.forEach(e=>{let t=document.createElement("article");t.classList.add("events_listItem","eventItem"),t.innerHTML=`<div class="eventItem__controlBlock"><span class="eventItem__controlItem button button--edit"></span>
        <span class="eventItem__controlItem button button--del"></span>
        </div>
      <p class="eventItem__title">${e.title}</p>                                                             
      <div class="eventItem__row">                                                                                                
      <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${e.startTime}</span></span>                      
      <span class="eventItem__duration"> Длительность: <span class="eventItem__durationSpan">${e.duration}</span></span>              
      </div>                                                                                                                      
      <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${e.location}</span></p>                               
      <p class="eventItem__participants">Участники: 
      <span class="eventItem__participantsSpan">${e.participants.join(",")}</span></p>`,s.appendChild(t)}),document.querySelectorAll(".button--del").forEach((e,t)=>{e.addEventListener("click",l=>{l.target.parentElement.parentElement.remove(),o.Events.forEach((f,_)=>{JSON.stringify(f)===JSON.stringify(a.Events[t])&&(o.Events.splice(_,1),console.log(o.Events),d(u))})})}),localStorage.setItem("eventsList",JSON.stringify(o))}d(p);m.innerHTML=p.toLocaleString("ru-ru",{month:"long",day:"numeric"});g.addEventListener("click",()=>{E.classList.toggle("collapse")});const h=document.querySelector(".addEventPopup__form");h.addEventListener("submit",n=>{const a=document.querySelector("#event-title"),s=document.querySelector("#event-date"),i=document.querySelector("#event-startTime"),e=document.querySelector("#event-duration"),t=document.querySelector("#event-location"),l=document.querySelector("#event-participants");n.preventDefault(),o.Events.push({title:a.value,date:s.value,startTime:i.value,duration:e.value,location:t.value,participants:l.value.split(",")}),d(u)});const y=document.querySelector("#calendar");let v=1,r=new Date(2023,v),c="<table class='calendar__table table table-bordered'><thead class='table-dark'><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let n=1;n<r.getDay();n++)c+="<td></td>";for(;r.getMonth()==v;)c+="<td>"+r.getDate()+"</td>",r.getDay()%7==0&&(c+="</tr><tr>"),r.setDate(r.getDate()+1);if(r.getDay()!=0)for(let n=r.getDay();n<=7;n++)c+="<td></td>";c+="</tr></table>";y.innerHTML=c;const S=document.querySelector(".calendar__table");S.addEventListener("click",n=>{let a=new Date;Number(n.target.textContent)&&(a.setDate(n.target.textContent),m.innerHTML=a.toLocaleString("ru-ru",{month:"long",day:"numeric"})),d(a)});
