(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&u(t)}).observe(document,{childList:!0,subtree:!0});function i(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(e){if(e.ep)return;e.ep=!0;const a=i(e);fetch(e.href,a)}})();const h=document.querySelector(".events__date"),D=document.querySelector(".events__addButton"),q=document.querySelector(".events__addPopup");let l={};localStorage.getItem("eventsList")?l=JSON.parse(localStorage.getItem("eventsList")):l={Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-02-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-02-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]};let L=new Date,_;function m(n){_=n;let r={Events:[]};l.Events.map(t=>{let o=new Date(t.date);n.getDate()===o.getDate()&&n.getMonth()===o.getMonth()&&n.getFullYear()===o.getFullYear()&&r.Events.push(t)});const i=document.querySelector(".events__list");i.innerHTML="",r.Events.forEach(t=>{let o=`<article class="events_listItem eventItem"><div class="eventItem__controlBlock"><span class="eventItem__controlItem button button--save collapse"></span><span class="eventItem__controlItem button button--edit"></span>
        <span class="eventItem__controlItem button button--del"></span>
        </div>
      <p class="eventItem__title">${t.title}</p>                                                             
      <div class="eventItem__row">                                                                                                
      <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${t.startTime}</span></span>                      
      <span class="eventItem__duration"> Длительность: <span class="eventItem__durationSpan">${t.duration}</span></span>              
      </div>                                                                                                                      
      <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${t.location}</span></p>                               
      <p class="eventItem__participants">Участники: 
      <span class="eventItem__participantsSpan">${t.participants.join(",")}</span></p></article>`;i.innerHTML+=o});const u=document.querySelectorAll(".button--edit"),e=document.querySelectorAll(".button--del"),a=document.querySelectorAll(".button--save");e.forEach((t,o)=>{t.addEventListener("click",E=>{E.target.parentElement.parentElement.remove(),l.Events.forEach((c,v)=>{JSON.stringify(c)===JSON.stringify(r.Events[o])&&(l.Events.splice(v,1),console.log(l.Events),m(_))})})}),u.forEach((t,o)=>{t.addEventListener("click",E=>{E.preventDefault(),t.classList.add("collapse"),a[o].classList.remove("collapse");let c=E.target.parentElement.parentElement,v=c.querySelector(".eventItem__title"),f=c.querySelector(".eventItem__startTimeSpan"),y=c.querySelector(".eventItem__durationSpan"),S=c.querySelector(".eventItem__locationSpan"),g=c.querySelector(".eventItem__participantsSpan");v.innerHTML=`<input type="text" value="${v.textContent}">`,f.innerHTML=`<input type="time" value="${f.textContent}">`,y.innerHTML=`<input type="text" value="${y.textContent}">`,S.innerHTML=`<input type="text" value="${S.textContent}">`,g.innerHTML=`<input type="text" value="${g.textContent}">`,a[o].addEventListener("click",b=>{b.preventDefault(),l.Events.forEach((T,p)=>{JSON.stringify(T)===JSON.stringify(r.Events[o])&&(l.Events[p].title=v.children[0].value,l.Events[p].startTime=f.children[0].value,l.Events[p].duration=y.children[0].value,l.Events[p].location=S.children[0].value,l.Events[p].participants=g.children[0].value.split(","),m(_))})})})}),localStorage.setItem("eventsList",JSON.stringify(l))}m(L);h.innerHTML=L.toLocaleString("ru-ru",{month:"long",day:"numeric"});D.addEventListener("click",()=>{q.classList.toggle("collapse")});const M=document.querySelector(".addEventPopup__form");M.addEventListener("submit",n=>{const r=document.querySelector("#event-title"),i=document.querySelector("#event-date"),u=document.querySelector("#event-startTime"),e=document.querySelector("#event-duration"),a=document.querySelector("#event-location"),t=document.querySelector("#event-participants");n.preventDefault(),l.Events.push({title:r.value,date:i.value,startTime:u.value,duration:e.value,location:a.value,participants:t.value.split(",")}),m(_)});const H=document.querySelector("#calendar");let I=1,s=new Date(2023,I),d="<table class='calendar__table table table-bordered'><thead class='table-dark'><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let n=1;n<s.getDay();n++)d+="<td></td>";for(;s.getMonth()==I;)d+="<td>"+s.getDate()+"</td>",s.getDay()%7==0&&(d+="</tr><tr>"),s.setDate(s.getDate()+1);if(s.getDay()!=0)for(let n=s.getDay();n<=7;n++)d+="<td></td>";d+="</tr></table>";H.innerHTML=d;const N=document.querySelector(".calendar__table");N.addEventListener("click",n=>{let r=new Date;Number(n.target.textContent)&&(r.setDate(n.target.textContent),h.innerHTML=r.toLocaleString("ru-ru",{month:"long",day:"numeric"})),m(r)});
