(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();function y(n){const t=document.querySelector("#filterStartTime"),o=document.querySelector("#filterDuration"),c=document.querySelector("#filterLocation"),e=document.querySelector("#filterParticipants");t.innerHTML='<option value="" class="startTime__listItem">Все</option>',o.innerHTML='<option value="" class="duration__listItem">Все</option>',c.innerHTML='<option value="" class="location__listItem">Все</option>',e.innerHTML='<option value="" class="participant__listItem">Все</option>';let a=new Set,l=new Set,r=new Set,u=new Set;n.Events.forEach(s=>{a.add(s.startTime),l.add(s.duration),r.add(s.location),u.add(s.participants.join(","))});function i(s,p,f){Array.from(s).sort((v,m)=>v-m).forEach(v=>{let m=`<option value="${v}" class=${f}>${v}</option>`;p.innerHTML+=m})}i(a,t,"startTime__listItem"),i(l,o,"duration__listItem"),i(r,c,"location__listItem"),i(u,e,"participants__listItem")}function q(n){const t=document.querySelector("#filterStartTime"),o=document.querySelector("#filterDuration"),c=document.querySelector("#filterLocation"),e=document.querySelector("#filterParticipants"),a=i(t,"startTime"),l=i(o,"duration"),r=i(e,"participants"),u=i(c,"location");function i(f,v){return function(m){return f.value?typeof m[v]=="object"?m[v].join(",")===f.value:m[v]===f.value:!0}}function s(){return{Events:n.Events.slice(0).filter(a).filter(l).filter(u).filter(r)}}return s().Events}function L(n){document.querySelector(".filters__wrapper").addEventListener("change",()=>{_(n,d.activeDate)})}function w(){return localStorage.getItem("eventsList")?JSON.parse(localStorage.getItem("eventsList")):{Events:[{title:"Соревнование по лёгкой атлетике",date:"2023-03-15",startTime:"14:30",duration:"4",location:"Бауманская",participants:["Тренер","Мартышка"]},{title:"Воллейбол",date:"2023-03-16",startTime:"12:30",duration:"1",location:"Сокольники",participants:["Саня","Яна"]}]}}function h(n){localStorage.setItem("eventsList",JSON.stringify(n))}function D(n){const t=document.querySelector(".events__date");t.innerHTML=n.toLocaleString("ru-RU",{month:"long",day:"numeric",year:"numeric"})}function E(n,t){let o={Events:[]};return n.forEach(c=>{let e=new Date(c.date);t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()&&o.Events.push(c)}),o}function _(n,t){let o=q(n),c=E(o,t);const e=document.querySelector(".events__list");e.innerHTML="",c.Events.forEach(a=>{let l=`<article class="events_listItem eventItem"><div class="eventItem__controlBlock"><span class="eventItem__controlItem btn btn--save collapse"></span><span class="eventItem__controlItem btn btn--edit"></span>
      <span class="eventItem__controlItem btn btn--del"></span>
      </div>
    <p class="eventItem__title">${a.title}</p>                                                             
    <div class="eventItem__row">                                                                                                
    <span class="eventItem__startTime">Время начала: <span class="eventItem__startTimeSpan">${a.startTime}</span></span>                      
    <span class="eventItem__duration">\\ Длительность: <span class="eventItem__durationSpan">${a.duration}</span></span>              
    </div>                                                                                                                      
    <p class="eventItem__location">Место: <span class="eventItem__locationSpan">${a.location}</span></p>                               
    <p class="eventItem__participants">Участники: 
    <span class="eventItem__participantsSpan">${a.participants.join(",")}</span></p></article>`;e.innerHTML+=l}),M(c,n,t)}function M(n,t,o){const c=document.querySelectorAll(".btn--edit"),e=document.querySelectorAll(".btn--del"),a=document.querySelectorAll(".btn--save");e.forEach((l,r)=>{l.addEventListener("click",()=>{let u=0;t.Events.forEach((i,s)=>{if(JSON.stringify(i)===JSON.stringify(n.Events[r]))for(;u<1;)u++,t.Events.splice(s,1),h(t),d(t,o),_(t,o),y(E(t.Events,d.activeDate))})})}),c.forEach((l,r)=>{l.addEventListener("click",u=>{u.preventDefault(),l.classList.add("collapse"),a[r].classList.remove("collapse");let i=u.target.parentElement.parentElement,s=i.querySelector(".eventItem__title"),p=i.querySelector(".eventItem__startTimeSpan"),f=i.querySelector(".eventItem__durationSpan"),v=i.querySelector(".eventItem__locationSpan"),m=i.querySelector(".eventItem__participantsSpan");s.innerHTML=`<input type="text" value="${s.textContent}">`,p.innerHTML=`<input type="time" value="${p.textContent}">`,f.innerHTML=`<input type="text" value="${f.textContent}">`,v.innerHTML=`<input type="text" value="${v.textContent}">`,m.innerHTML=`<input type="text" value="${m.textContent}">`,a[r].addEventListener("click",T=>{T.preventDefault();let g=0;t.Events.forEach((I,S)=>{if(JSON.stringify(I)===JSON.stringify(n.Events[r]))for(;g<1;)g++,t.Events[S].title=s.children[0].value,t.Events[S].startTime=p.children[0].value,t.Events[S].duration=f.children[0].value,t.Events[S].location=v.children[0].value,t.Events[S].participants=m.children[0].value.split(","),h(t),d(t,o),_(t,o),y(E(t.Events,d.activeDate))})})})})}function F(){function n(){const o=document.querySelector(".events__addPopup");o.classList.contains("collapse")?o.classList.remove("collapse"):o.classList.add("collapse")}document.querySelector(".events__addButton").addEventListener("click",n)}function H(n){const t=document.querySelector("#event-title"),o=document.querySelector("#event-date"),c=document.querySelector("#event-startTime"),e=document.querySelector("#event-duration"),a=document.querySelector("#event-location"),l=document.querySelector("#event-participants");n.Events.push({title:t.value,date:o.value,startTime:c.value,duration:e.value,location:a.value,participants:l.value.split(",")})}function P(n){function t(c,e,a){c.preventDefault(),H(e),h(e),y(E(e.Events,d.activeDate)),d(e,a),_(e,a)}document.querySelector(".addEventPopup__form").addEventListener("submit",c=>{t(c,n,d.activeDate)})}function d(n,t){function o(){const l=document.querySelector("#calendar");let r=new Date(new Date().getFullYear(),new Date().getMonth());const u=t.getDate(),i=r.getMonth();let s="<table class='calendar__table table table-bordered JS-calendar'><thead><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></thead><tr>";for(let p=1;p<r.getDay();p++)s+="<td></td>";for(;r.getMonth()===i;)c(r,n)&&r.getDate()===u?s+="<td class='table-active has-event'>"+r.getDate()+"</td>":r.getDate()===u?s+="<td class='table-active'>"+r.getDate()+"</td>":c(r,n)?s+="<td class='has-event'>"+r.getDate()+"</td>":s+="<td>"+r.getDate()+"</td>",r.getDay()%7===0&&(s+="</tr><tr>"),r.setDate(r.getDate()+1);if(r.getDay()!==0)for(let p=r.getDay();p<=7;p++)s+="<td></td>";s+="</tr></table>",l.innerHTML=s}function c(l,r){return!!r.Events.filter(i=>new Date(i.date).getDate()===l.getDate()&&new Date(i.date).getMonth()===l.getMonth()&&new Date(i.date).getFullYear()===l.getFullYear()).length}function e(l){const r=l.currentTarget.querySelectorAll("td"),u=l.target.textContent;t=new Date(new Date().setDate(u)),d.activeDate=t,r.forEach(i=>i.classList.remove("table-active")),u&&l.target.tagName==="TD"&&l.target.classList.add("table-active"),D(t),_(n,t),y(E(n.Events,d.activeDate))}o(),document.querySelector(".JS-calendar").addEventListener("click",e)}function $(){let n=w();d.activeDate=new Date,d(n,d.activeDate),L(n),F(),P(n),_(n,d.activeDate),y(E(n.Events,d.activeDate)),D(d.activeDate),h(n)}$();
